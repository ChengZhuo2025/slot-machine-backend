# 商城模块样式优化和动画总结

## 一、统一页面样式风格

### 1. 样式变量系统
所有页面都使用了项目统一的 SCSS 变量：

```scss
@import '@/styles/variables.scss';
@import '@/styles/mixins.scss';
```

**使用的主要变量：**
- `$background-primary` - 主背景色（白色）
- `$background-secondary` - 次背景色（浅灰）
- `$background-tertiary` - 三级背景色
- `$text-primary` - 主文字颜色
- `$text-secondary` - 次文字颜色
- `$text-tertiary` - 三级文字颜色
- `$primary-color` - 主题色（紫色）
- `$error-color` - 错误/价格色（红色）
- `$warning-color` - 警告色（橙色）
- `$border-color` - 边框颜色
- `$font-weight-medium` - 中等字重
- `$font-weight-semibold` - 半粗字重
- `$font-weight-bold` - 粗字重
- `$transition-base` - 基础过渡动画

### 2. Mixins 复用
使用统一的 mixins 确保布局一致性：

```scss
@include flex-start();      // 左对齐布局
@include flex-center();     // 居中布局
@include flex-between();    // 两端对齐布局
@include flex-end();        // 右对齐布局
@include text-ellipsis(2);  // 文字省略（2行）
```

### 3. 统一的组件样式

#### 导航栏样式
所有页面的导航栏保持一致：
- 固定在顶部
- 高度：88rpx + 安全区域
- 背景：白色
- 底部边框：1rpx
- 左中右三栏布局

#### 卡片样式
所有卡片组件保持一致：
- 背景：白色
- 圆角：16rpx
- 内边距：32rpx
- 底部间距：16rpx

#### 按钮样式
统一的按钮设计：
- 主按钮：紫色渐变
- 次按钮：灰色背景
- 圆角：40rpx（大按钮）/ 24rpx（小按钮）
- 点击缩放效果

#### 价格样式
统一的价格展示：
- 颜色：红色（$error-color）
- 符号：24rpx
- 数值：36-48rpx，粗体
- 原价：删除线，灰色

## 二、页面切换动画

### 1. 页面级动画
所有页面使用 animate.css 动画库：

**主要动画类型：**
- `animate__fadeIn` - 淡入
- `animate__fadeInUp` - 从下淡入
- `animate__fadeInDown` - 从上淡入
- `animate__slideInUp` - 从下滑入
- `animate__bounceIn` - 弹跳进入

### 2. 动画延迟
使用 `animation-delay` 实现错落有致的进入效果：

```html
<view class="card animate__animated animate__fadeInUp" style="animation-delay: 100ms;">
<view class="card animate__animated animate__fadeInUp" style="animation-delay: 200ms;">
<view class="card animate__animated animate__fadeInUp" style="animation-delay: 300ms;">
```

## 三、元素进入动画

### 1. 商品详情页
- 图片轮播：`fadeIn`
- 商品信息卡片：`fadeInUp` + 100ms 延迟
- Tab 区域：`fadeInUp` + 200ms 延迟

### 2. 购物车页
- 购物车列表：`fadeIn`
- 空状态：`fadeIn`

### 3. 订单确认页
- 地址卡片：`fadeInDown`
- 商品清单：`fadeInUp` + 100ms 延迟
- 优惠券：`fadeInUp` + 200ms 延迟
- 价格明细：`fadeInUp` + 400ms 延迟
- 支付方式：`fadeInUp` + 500ms 延迟

### 4. 订单详情页
- 状态卡片：`bounceIn`
- 物流信息：`fadeInDown` + 100ms 延迟
- 地址信息：`fadeInUp` + 200ms 延迟
- 商品列表：`fadeInUp` + 300ms 延迟
- 订单信息：`fadeInUp` + 400ms 延迟
- 价格明细：`fadeInUp` + 500ms 延迟

### 5. 商品搜索页
- 搜索建议：即时显示
- 搜索结果：`fadeIn`
- 空状态：`fadeIn`

### 6. 商品评价页
- 商品信息：`fadeInDown`
- 评分卡片：`fadeInUp` + 100ms 延迟
- 内容输入：`fadeInUp` + 200ms 延迟
- 图片上传：`fadeInUp` + 300ms 延迟
- 其他选项：`fadeInUp` + 400ms 延迟

### 7. 优惠券页
- 优惠券列表：`fadeInUp`
- 空状态：`fadeIn`

### 8. 底部操作栏
所有页面的底部操作栏使用：`slideInUp`

## 四、交互反馈优化

### 1. 点击反馈

#### 缩放效果
```scss
&:active {
  transform: scale(0.98);  // 按钮
  transform: scale(0.95);  // 小元素
  transform: scale(0.9);   // 图标
}
```

#### 透明度变化
```scss
&:active {
  opacity: 0.7;
}
```

#### 背景变化
```scss
&:active {
  background: $background-secondary;
}
```

### 2. 状态反馈

#### 选中状态
- 边框高亮（主题色）
- 背景色变化
- 图标变化（实心/空心）
- 文字颜色变化

#### 禁用状态
```scss
&--disabled {
  opacity: 0.5;
  pointer-events: none;
}
```

#### 加载状态
- 使用 `uni.showLoading()`
- 统一的加载文案
- 自动隐藏

### 3. 过渡动画

#### 基础过渡
```scss
transition: all $transition-base;  // 0.3s ease
```

#### 应用场景
- 按钮状态变化
- 颜色变化
- 尺寸变化
- 透明度变化

### 4. 特殊交互

#### 星星评分
```scss
.star-item {
  &:active {
    transform: scale(1.2);  // 点击放大
  }
}
```

#### 图片上传
```scss
.upload-btn {
  &:active {
    transform: scale(0.98);
  }
}
```

#### 数量选择器
```scss
.quantity-btn {
  &:active:not(&--disabled) {
    transform: scale(0.9);
  }
}
```

## 五、视觉优化

### 1. 渐变背景
- 主按钮：紫色渐变
- 次按钮：橙色渐变
- 优惠券：橙色/灰色渐变
- 状态卡片：根据状态不同颜色渐变

### 2. 阴影效果
- 卡片：轻微阴影
- 悬浮元素：明显阴影

### 3. 圆角设计
- 大卡片：16rpx
- 小卡片：12rpx
- 按钮：24-44rpx
- 图片：8-16rpx

### 4. 间距规范
- 页面边距：16rpx
- 卡片间距：16rpx
- 元素间距：8-24rpx
- 内边距：16-32rpx

## 六、响应式设计

### 1. 安全区域适配
```scss
padding-top: env(safe-area-inset-top);
padding-bottom: env(safe-area-inset-bottom);
```

### 2. 固定定位
- 导航栏：固定顶部
- Tab 栏：固定顶部（次级）
- 底部操作栏：固定底部

### 3. 滚动容器
```scss
.content {
  height: 100vh;
  padding-top: calc(88rpx + env(safe-area-inset-top));
}
```

## 七、性能优化

### 1. 动画性能
- 使用 `transform` 而非 `position`
- 使用 `opacity` 而非 `visibility`
- 避免复杂的 CSS 选择器

### 2. 过渡优化
- 统一使用 `$transition-base`
- 避免过长的过渡时间
- 合理使用 `will-change`

### 3. 图片优化
- 使用 `mode="aspectFill"` 保持比例
- 设置背景色避免闪烁
- 懒加载（列表场景）

## 八、一致性检查清单

✅ 所有页面使用统一的样式变量
✅ 所有页面使用统一的 mixins
✅ 所有页面有进入动画
✅ 所有按钮有点击反馈
✅ 所有卡片样式一致
✅ 所有导航栏样式一致
✅ 所有价格展示一致
✅ 所有空状态样式一致
✅ 所有加载状态一致
✅ 所有错误提示一致

## 九、已实现的动画效果总结

### 页面级动画（7个页面）
1. ✅ 商品详情页 - 多层级淡入动画
2. ✅ 购物车页 - 列表淡入动画
3. ✅ 订单确认页 - 错落有致的进入动画
4. ✅ 订单详情页 - 状态弹跳 + 内容淡入
5. ✅ 商品搜索页 - 搜索结果淡入
6. ✅ 商品评价页 - 表单元素依次进入
7. ✅ 优惠券页 - 优惠券卡片淡入

### 组件级动画（2个组件）
1. ✅ 规格选择器 - 底部滑入
2. ✅ 优惠券选择器 - 底部滑入

### 交互动画
1. ✅ 按钮点击缩放
2. ✅ 图标点击缩放
3. ✅ 卡片点击缩放
4. ✅ 星星评分放大
5. ✅ 状态切换过渡
6. ✅ 颜色变化过渡

## 十、总结

商城模块的样式和动画已经完全统一和优化：

1. **样式一致性**：所有页面使用统一的设计语言和样式规范
2. **动画流畅性**：合理使用 animate.css 和 CSS 过渡动画
3. **交互友好性**：所有交互都有明确的视觉反馈
4. **性能优化**：使用高性能的动画属性和合理的动画时长
5. **响应式设计**：适配不同设备和安全区域

整个商城模块已经具备了优秀的视觉效果和用户体验！🎨✨
